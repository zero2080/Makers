--회원
DROP TABLE MEMBER;

CREATE TABLE MEMBER (
        MID VARCHAR2(40) PRIMARY KEY,
        MPW VARCHAR2(20) NOT NULL,
        MADDR VARCHAR2(200),
        MPHONE VARCHAR2(20),
        MPOINT NUMBER(10),        
        MIMG VARCHAR2(200),
        MNAME VARCHAR2(30) NOT NULL,
        MACCOUNT VARCHAR2(20),
        MBANK VARCHAR2(20),
        MACNAME VARCHAR2(50),
        MDATE DATE DEFAULT SYSDATE,
        MSTATUS NUMBER(1)
        );
        
-- 관리자      
DROP TABLE ADMIN;

CREATE TABLE ADMIN (
    AID VARCHAR2(20) PRIMARY KEY,
    APW VARCHAR2(40) NOT NULL
    );
   
-- GRADE(등급)

DROP TABLE GRADE;

CREATE TABLE GRADE (
        MGRADE NUMBER(2) PRIMARY KEY,
        HPOINT NUMBER(5) NOT NULL,
        LPOINT NUMBER(5) NOT NULL
        );                 

--상품제작 
DROP TABLE MAKEORDER;

DROP SEQUENCE MAKEORDER_SEQ;

CREATE SEQUENCE MAKEORDER_SEQ MAXVALUE 999999 NOCYCLE NOCACHE;

CREATE TABLE MAKEORDER (
        MRNUM NUMBER(10) PRIMARY KEY,
        MID VARCHAR2(40) REFERENCES MEMBER(MID) NOT NULL,
        MRTITLE VARCHAR2(100) NOT NULL,
        MRCONTENT CLOB,
        MRCOUNT NUMBER(3) NOT NULL,
        MRDATE DATE DEFAULT SYSDATE,
        MRENDDATE DATE NOT NULL,
        MRTIMELIMIT DATE NOT NULL,
        MRIMG VARCHAR2(200) NOT NULL,
        MRSTATUS NUMBER(1)
        );
 INSERT INTO MAKEORDER VALUES (10,'dltpwjd1218@naver.com','TT','CC',20,SYSDATE,SYSDATE+10,SYSDATE+20,'나무1.JPG',4);
 COMMIT;
 select * from member;
--경매
DROP TABLE AUCTION;

DROP SEQUENCE AUCTION_SEQ;

CREATE SEQUENCE AUCTION_SEQ MAXVALUE 999999 NOCYCLE NOCACHE;

CREATE TABLE AUCTION (
        ACNUM NUMBER(10) PRIMARY KEY,
        MID VARCHAR2(40) REFERENCES MEMBER(MID) NOT NULL,
        MRNUM NUMBER(10) REFERENCES MAKEORDER(MRNUM) NOT NULL,
        ACPRICE NUMBER(10) NOT NULL,
        ACDATE DATE DEFAULT SYSDATE,
        ACSTATUS NUMBER(1),
        ACTIMELIMIT DATE NOT NULL,
        MID2 VARCHAR2(40)
        );
        
--메세지
DROP TABLE MESSAGE;

DROP SEQUENCE MESSAGE_SEQ;

CREATE SEQUENCE MESSAGE_SEQ MAXVALUE 999999 NOCYCLE NOCACHE;

CREATE TABLE MESSAGE (
        MSNUM NUMBER(10) PRIMARY KEY,
        MID VARCHAR2(40) REFERENCES MEMBER(MID) NOT NULL,
        MID2 VARCHAR2(40) NOT NULL,
        MSCONTENT VARCHAR2(500) NOT NULL,
        MSDATE DATE DEFAULT SYSDATE,
        MSFROMSTATUS NUMBER(1),
        MSTOSTATUS NUMBER(1)
        );
  
--자유게시판      
DROP SEQUENCE FREEBOARD_SEQ;
CREATE SEQUENCE FREEBOARD_SEQ NOCYCLE NOCACHE;

DROP TABLE FREEBOARD;
CREATE TABLE FREEBOARD(
    FBNUM NUMBER(8) PRIMARY KEY,
    MID VARCHAR2(40) REFERENCES MEMBER(MID),
    FBCATEGORY VARCHAR2(40) NOT NULL,
    FBTITLE VARCHAR2(200) NOT NULL,
    FBCONTENT CLOB,
    FBFILE VARCHAR2(1000),
    FBDATE DATE DEFAULT SYSDATE,
    FBREADCOUNT NUMBER DEFAULT 0,
    FBIP VARCHAR2(20)   
);

--자유게시판 댓글
DROP SEQUENCE FBCOMMENT_SEQ;
CREATE SEQUENCE FBCOMMENT_SEQ NOCYCLE NOCACHE;

DROP TABLE FBCOMMENT CASCADE CONSTRAINTS;
CREATE TABLE FBCOMMENT(
    FBCNUM NUMBER PRIMARY KEY,
    FBNUM NUMBER REFERENCES FREEBOARD(FBNUM) NOT NULL,
    MID VARCHAR2(40) REFERENCES MEMBER(MID) NOT NULL,
    FBCGROUP NUMBER NOT NULL,
    FBCSTEP NUMBER(3) DEFAULT 0,
    FBCDATE DATE DEFAULT SYSDATE,
    FBCCONTENT VARCHAR2(1000) NOT NULL
);

--상품테이블
DROP SEQUENCE PR_SEQ;
DROP TABLE PRODUCT;

CREATE SEQUENCE PR_SEQ MAXVALUE 99999999 NOCYCLE NOCACHE; 
CREATE TABLE PRODUCT(
             PNUM NUMBER(8) PRIMARY KEY,
             PTITLE VARCHAR2(200) NOT NULL,
             PCONTENT CLOB,
             PCOUNT NUMBER(10),
             PREADCOUNT NUMBER(10) DEFAULT 0,
             PCATEGORY VARCHAR(100) NOT NULL,
             MID VARCHAR2(40) REFERENCES MEMBER(MID),
             MRNUM NUMBER(8) REFERENCES MAKEORDER(MRNUM),
             PRICE NUMBER(10) NOT NULL,
             PSTATE NUMBER(2) DEFAULT 0
         );
                
-- 상품 댓글
DROP TABLE PRCOMMENT;

DROP SEQUENCE PRCOMMENT_SEQ;

CREATE SEQUENCE PRCOMMENT_SEQ MAXVALUE 999999 NOCYCLE NOCACHE;

CREATE TABLE PRCOMMENT (
        PRCNUM NUMBER(10) PRIMARY KEY,
        MID VARCHAR2(40) REFERENCES MEMBER(MID) NOT NULL,
        PNUM NUMBER(10) REFERENCES PRODUCT(PNUM) NOT NULL,
        PRCGROUP NUMBER(10) NOT NULL,
        PRCSTEP NUMBER(10),
        PRCDATE DATE DEFAULT SYSDATE,
        PRCCONTENT VARCHAR2(1000) NOT NULL
        );

--부품신청게시판
DROP TABLE ITEMBOARD;
DROP SEQUENCE IB_SEQ;

CREATE SEQUENCE IB_SEQ START WITH 1 NOCYCLE NOCACHE MAXVALUE 99999999;

CREATE TABLE ITEMBOARD (IBNUM NUMBER(8) PRIMARY KEY,
                        IBCATEGORY VARCHAR2(20) NOT NULL,
                        IBTITLE VARCHAR2(200) NOT NULL,
                        IBCONTENT CLOB,
                        IBIMG VARCHAR2(100),
                        IBDATE DATE DEFAULT SYSDATE,
                        IBSTATE NUMBER(1) DEFAULT 0,
                        MID VARCHAR2(40) REFERENCES MEMBER(MID));

--부품 색상테이블                 
DROP TABLE ITEMCOLOR;
DROP SEQUENCE ITC_SEQ ;

CREATE SEQUENCE ITC_SEQ START WITH 1 NOCYCLE NOCACHE MAXVALUE 99999999;
                       
CREATE TABLE ITEMCOLOR(
                ITCNUM NUMBER PRIMARY KEY,
                IBNUM NUMBER(8) REFERENCES ITEMBOARD(IBNUM),
                ITCOLOR VARCHAR2(100)
    );  
    

--부품테이블
DROP TABLE ITEMS;
DROP SEQUENCE ITEMS_SEQ ;

CREATE SEQUENCE ITEMS_SEQ START WITH 1 NOCYCLE NOCACHE MAXVALUE 99999999;

CREATE TABLE ITEMS(
                ITNUM NUMBER PRIMARY KEY,
                ITCATEGORY VARCHAR2(20) NOT NULL,
                ITNAME VARCHAR2(200) NOT NULL,
                ITIMG VARCHAR2(100) NOT NULL,
                ITDATE DATE DEFAULT SYSDATE,
                IBNUM NUMBER(8) REFERENCES ITEMBOARD(IBNUM)
         );

--상품주문
DROP TABLE PORDER;
DROP SEQUENCE PORDER_SEQ;
                   
CREATE TABLE PORDER (
	ORNUM NUMBER PRIMARY KEY,
	ORNAME VARCHAR2(20),
	ORADDR VARCHAR2(100),
	ORPOST VARCHAR2(100),
    ORPHONE VARCHAR2(20),
	MID VARCHAR2(40) REFERENCES MEMBER(MID) NOT NULL,
    ORDATE DATE DEFAULT SYSDATE,
    ORSTATE NUMBER(2) DEFAULT 0
);                 

CREATE SEQUENCE PORDER_SEQ INCREMENT BY 1 NOCYCLE NOCACHE MAXVALUE 99999999;

-- 카트
DROP SEQUENCE CT_SEQ;
DROP TABLE CART;

CREATE SEQUENCE CT_SEQ MAXVALUE 99999999 NOCYCLE NOCACHE;

CREATE TABLE CART (
                   CTNUM NUMBER(8) PRIMARY KEY,
                   CTCOUNT NUMBER(8) NOT NULL,
                   MID VARCHAR2(40) REFERENCES MEMBER(MID),
                   PNUM NUMBER(8) REFERENCES PRODUCT(PNUM),
                   ORNUM NUMBER(8),
                   CTSTATE NUMBER(2) DEFAULT 0,
                   PRICE NUMBER(10)
            );

--QnA
DROP TABLE QNA;
DROP SEQUENCE QA_SEQ;
    
CREATE TABLE QNA (QNUM NUMBER(8) PRIMARY KEY,
                  QTITLE VARCHAR2(100) NOT NULL,
                  QCONTENT CLOB,
                  QGROUP NUMBER(8) NOT NULL,
                  QSTEP NUMBER(8) DEFAULT 0,
                  QFILE VARCHAR2(100),
                  QDATE DATE DEFAULT SYSDATE,
                  QREADCOUNT NUMBER(5) DEFAULT 0,
                  QIP VARCHAR2(20) NOT NULL,
                  QSTAT NUMBER(1) DEFAULT 0,
                  MID VARCHAR2(40) REFERENCES MEMBER(MID),
                  AID VARCHAR2(20) REFERENCES ADMIN(AID));
                  
CREATE SEQUENCE QA_SEQ MAXVALUE 99999999 NOCYCLE NOCACHE;